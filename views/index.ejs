<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Meta tags for character encoding and responsiveness -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Page Title -->
  <title>Book Notes</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Custom stylesheet -->
  <link rel="stylesheet" href="/styles/index.css" />
</head>

<body class="bg-light text-dark">
  <!-- Main Container -->
  <div class="container py-4">
    
    <!-- Page Heading -->
    <h1 class="text-center mb-4">üìö Book Notes</h1>

    <!-- Top Buttons: Add Book & Toggle Dark Mode -->
    <div class="text-center mb-4">
      <a class="btn btn-primary" href="/add_book">Add</a>
      <button class="btn btn-dark" onclick="toggleDarkMode()">Toggle Dark Mode</button>
    </div>

    <!-- Book Cards List -->
    <div id="book-list" class="row g-4">
      <% books.forEach(book => { %>
        <div class="col-sm-12 col-md-6 col-lg-4">
          <!-- Link to Book Detail Page -->
          <a href="/book/<%= book.id %>" class="text-decoration-none text-dark">
            
            <!-- Book Card -->
            <div class="card h-100 shadow-sm">
              
              <!-- Book Cover Image -->
              <img src="<%= book.cover_url %>" alt="Book cover" class="card-img-top book-cover mt-3 rounded">

              <!-- Card Content -->
              <div class="card-body d-flex flex-column">
                <!-- Title and Author -->
                <h5 class="card-title">
                  <%= book.book_title %> - <%= book.author %>
                </h5>

                <!-- Date Read -->
                <p class="card-subtitle mb-2 text-muted">üìÖ <%= book.date_read %></p>

                <!-- Rating -->
                <p class="card-text text-warning">‚≠ê <%= book.rating %>/5</p>

                <!-- Short Notes Preview -->
                <p class="card-text book-notes">
                  <%= book.notes %>
                </p>
              </div>
            </div>
          </a>
        </div>
      <% }) %>
    </div>
  </div>

  <!-- Toggle Dark Mode Script -->
  <script>
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
    }
  </script>

  <!-- Bootstrap JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
